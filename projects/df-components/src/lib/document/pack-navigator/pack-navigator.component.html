<section class="pack-navigator">
  <ng-template #recursiveList let-list>
    <mdc-list *ngFor="let item of list"  dense class="pack-navigator-list">
      <mdc-list-item [ngClass]="buildClass(item)" (click)="onAction.emit(item)">
          {{ item.caption | titlecase}}
          <mdc-icon mdcListItemMeta *ngIf="item.children?.length > 0">keyboard_arrow_{{ item.expanded ? "down" : "right" }}</mdc-icon>
          <mdc-icon mdcListItemMeta *ngIf="!(item.children?.length > 0)">link</mdc-icon>
      </mdc-list-item>
      <mdc-list *ngIf="item.expanded && item.children && item.children.length > 0"  dense class="pack-navigator-list">
        <ng-container 
            *ngTemplateOutlet="
            recursiveList;
            context: { $implicit: item.children }
          "
        ></ng-container>
      </mdc-list>
    </mdc-list>
  </ng-template>
  <ng-container
    *ngTemplateOutlet="recursiveList; context: { $implicit: list | async}"
  ></ng-container>
</section>
